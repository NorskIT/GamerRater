<Page
    x:Class="GamerRater.Application.Views.GameDetailsPage"
    xmlns:application="using:GamerRater.Application"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:model="using:GamerRater.Model"
    xmlns:animations="using:Microsoft.Toolkit.Uwp.UI.Animations"
    Style="{StaticResource PageStyle}"
    mc:Ignorable="d">
    <Grid x:Name="GridView">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <RelativePanel HorizontalAlignment="Center" Margin="0,0,0,0"
                       VerticalAlignment="Stretch"
                       MaxWidth="800" MinWidth="500" Grid.Column="0" Grid.Row="0">
            <TextBlock Name="GameRootTitle" FontSize="30" TextAlignment="Center" FontWeight="Bold"
                       MaxHeight="89" MaxWidth="515" Text="{x:Bind ViewModel.MainGame.Name}"
                       TextWrapping="Wrap" Margin="10,0,-515,0" />
            <StackPanel Name="TitleBox" Orientation="Horizontal" RelativePanel.Below="GameRootTitle">
                <StackPanel Width="100" Orientation="Vertical" Margin="0,0,0,0" BorderBrush="DarkGray"
                            BorderThickness="2" Padding="5">
                    <TextBlock FontWeight="Bold" Text="Score: " VerticalAlignment="Stretch" />
                    <TextBlock Height="19" Margin="10,0,0,0" Text="{x:Bind ViewModel.MainGame.Popularity }" />
                </StackPanel>
                <StackPanel Width="100" Orientation="Vertical" Margin="10,0,0,0" BorderBrush="DarkGray"
                            BorderThickness="2" Padding="5">
                    <TextBlock FontWeight="Bold" Text="GameRoot ID: " VerticalAlignment="Stretch" />
                    <TextBlock Height="19" Margin="10,0,0,0" Text="{x:Bind ViewModel.MainGame.Id }" />
                </StackPanel>
                <StackPanel Width="100" Orientation="Vertical" Margin="10,0,0,0" BorderBrush="DarkGray"
                            BorderThickness="2" Padding="5">
                    <TextBlock FontWeight="Bold" Text="Reviews: " VerticalAlignment="Stretch" />
                    <TextBlock Height="19" Margin="10,0,0,0" Text="{x:Bind ViewModel.MainGame.Reviews }" />
                </StackPanel>
            </StackPanel>
            <StackPanel Name="DescriptionBox" RelativePanel.Below="TitleBox" Margin="0,10,0,0" Orientation="Vertical"
                        VerticalAlignment="Stretch" BorderBrush="DarkGray" BorderThickness="2" Padding="5">
                <TextBlock FontWeight="Bold" Text="Description: " />
                <TextBlock Name="GameRootSummary" Text="{x:Bind ViewModel.MainGame.Summary}" Margin="10,0,0,0"
                           TextWrapping="Wrap" MaxWidth="500" />
            </StackPanel>
            <Button Width="100" Height="50" Margin="0,10,0,0" RelativePanel.Below="DescriptionBox"
                    Name="AddGameRootButton" Click="AddGameButton_Click">
                Add Game
            </Button>
            <Button Width="100" Height="50" Margin="0,10,0,0" RelativePanel.Below="AddGameRootButton"
                    Name="AddReviewToGameRoot" Click="AddReviewToGame_Click">
                Add Review
            </Button>

            <Image Source="{x:Bind ViewModel.MainGame.GameCover.url}" Height="360" Margin="527,9,0,-9" Width="262" />
        </RelativePanel>

        <Grid HorizontalAlignment="Center" Margin="5,5,5,50"
              VerticalAlignment="Stretch"
              Grid.Column="1" Grid.Row="0" Padding="10,10,10,10"
              BorderThickness="5" BorderBrush="LightGray" Background="WhiteSmoke" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock Grid.Row="0" FontSize="28">/ Reviews /</TextBlock>
            <controls:AdaptiveGridView
                Grid.Row="1"
                BorderBrush="Black"
                BorderThickness="0,5,0,5"
                ItemsSource="{x:Bind ViewModel.Reviews,Mode=OneWay}"
                StretchContentForSingleRow="False"
                MinWidth="520"
                Width="520"
                SelectionMode="None"
                IsItemClickEnabled="False"
                animations:Connected.ListItemElementName="itemThumbnail"
                animations:Connected.ListItemKey="animationKeyContentGrid"
                ItemHeight="160">
                <controls:AdaptiveGridView.ItemTemplate>
                    <DataTemplate x:DataType="model:Review">
                        <StackPanel Padding="3" Width="520" Background="White" BorderBrush="Black"
                                    BorderThickness="2" >

                            <StackPanel Orientation="Horizontal">
                                <TextBlock xml:space="preserve" FontWeight="Bold" Text="Written by:" Padding="0,0,5,0" />
                                <TextBlock Text="{x:Bind User.Username}" />
                            </StackPanel>
                            <TextBlock Text="{x:Bind date}" />
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontWeight="Bold" Padding="0,0,5,0" Text="Stars:" />
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{x:Bind  Stars}" />
                                    <TextBlock Text=" of 5" />
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontWeight="Bold" Padding="0,0,5,0" Text="Review:" />
                                <TextBlock Width="450" TextWrapping="Wrap" Text="{x:Bind  ReviewText}" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </controls:AdaptiveGridView.ItemTemplate>
            </controls:AdaptiveGridView>
        </Grid>
    </Grid>
</Page>
